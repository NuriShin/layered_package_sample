<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.layered.project.mapper.ProjectMapper">

    <!-- 프로젝트 입력 -->
    <select id="insert" parameterType="com.example.layered.project.domain.Project"
            resultType="Long">
        INSERT INTO PROJECT
            (NAME, SUPERVISOR_ID, PAY, CREATEDAT)
        VALUES(#{name}, #{supervisorId, jdbcType=VARCHAR}, #{pay}, #{createdAt})
    </select>

    <!-- 단일 프로젝트 조회 -->
    <select id="select"
            parameterType="java.util.List"
            resultType="com.example.layered.project.dto.response.ProjectResponse">
        SELECT
        ID,
        NAME,
        PAY,
        SUPERVISOR_ID,
        CREATEDAT
        FROM PROJECT
        <where>
            <foreach collection="list"
                     item="cond"
                     separator=" OR ">
                (
                <if test="cond.id != null">
                    ID = #{cond.id}
                </if>
                <if test="cond.name != null">
                    AND NAME = #{cond.name}
                </if>
                <if test="cond.supervisorId != null">
                    AND SUPERVISOR_ID = #{cond.supervisorId}
                </if>
                <if test="cond.pay != null and cond.pay &gt;= 0">
                    AND PAY = #{cond.pay}
                </if>
                )
            </foreach>
        </where>
    </select>



</mapper>
